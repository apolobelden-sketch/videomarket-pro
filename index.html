<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Kids - TikTok Style</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            background-color: #000; /* Fondo negro como TikTok */
            font-family: 'Segoe UI', Roboto, sans-serif;
            overflow: hidden; /* Evita el scroll raro */
        }

        /* Contenedor principal tipo TikTok */
        .snap-container {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory; /* Hace el efecto de "salto" entre videos */
        }

        .video-page {
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* El video ocupa todo el fondo */
        video {
            height: 100%;
            width: 100%;
            object-fit: cover; /* Se estira para llenar la pantalla */
        }

        /* Capa oscura abajo para que los botones se lean bien */
        .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 40px 20px;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            pointer-events: none; /* Deja que toques el video */
        }

        .info {
            pointer-events: auto;
            margin-bottom: 20px;
        }

        .titulo {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* Botones abajo del video */
        .btn-group {
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn {
            padding: 15px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            text-align: center;
            color: white;
            font-size: 1rem;
            transition: 0.3s;
        }

        .btn-pago { background: #009EE3; }
        .btn-telegram { background: #24A1DE; }
        .btn-pdf { background: #28a745; border: 2px solid white; }

        /* Estilo para el bot√≥n de "Scroll" para avisar que hay m√°s */
        .scroll-hint {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            opacity: 0.7;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <div id="app" class="snap-container"></div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const yaPago = params.get('pago') === 'exitoso' || params.get('status') === 'approved';

        const misLibros = [
            {
                titulo: "Cuenta las Manzanas",
                video: "https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/Videos/cuenta%20las%20manzanas.mp4",
                pagoUrl: "https://mpago.la/2i9aDso",
                pdfUrl: "https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/pdfs/cuenta%20las%20manzanas.pdf",
                telegramUrl: "https://t.me/mis_libros_gen_bot"
            },
            {
                titulo: "La Familia",
                video: "https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/Videos/familia5.mp4",
                pagoUrl: "https://mpago.la/2X3uMmY",
                pdfUrl: "https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/pdfs/familia5.pdf",
                telegramUrl: "https://t.me/mis_libros_gen_bot"
            },
            {
                titulo: "Coloreando",
                video: "https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/Videos/coloreando6.mp4",
                pagoUrl: "https://mpago.la/2fCekEw",
                pdfUrl: "https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/pdfs/coloreando6.pdf",
                telegramUrl: "https://t.me/mis_libros_gen_bot"
            }
        ];

        const contenedor = document.getElementById('app');

        misLibros.forEach((libro, i) => {
            const page = document.createElement('div');
            page.className = 'video-page';
            
            page.innerHTML = `
                ${i === 0 ? '<div class="scroll-hint">Desliza hacia arriba ‚Üë</div>' : ''}
                <video loop playsinline onclick="this.paused ? this.play() : this.pause()">
                    <source src="${libro.video}" type="video/mp4">
                </video>
                
                <div class="overlay">
                    <div class="info">
                        <div class="titulo">${libro.titulo}</div>
                        <div>üí∞ Solo $12 MXN</div>
                    </div>
                    
                    <div class="btn-group">
                        ${yaPago ? `
                            <a href="${libro.pdfUrl}" download class="btn btn-pdf">üì• DESCARGAR PDF</a>
                        ` : `
                            <a href="${libro.pagoUrl}" class="btn btn-pago">üí≥ COMPRAR AHORA</a>
                            <a href="${libro.telegramUrl}" class="btn btn-telegram">‚úàÔ∏è PAGO POR TRANSFERENCIA</a>
                        `}
                    </div>
                </div>
            `;
            contenedor.appendChild(page);
        });

        // Autoplay al hacer scroll (como TikTok)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const video = entry.target.querySelector('video');
                if (entry.isIntersecting) {
                    video.play().catch(() => {});
                } else {
                    video.pause();
                }
            });
        }, { threshold: 0.6 });

        document.querySelectorAll('.video-page').forEach(div => observer.observe(div));
    </script>
</body>
</html>
