<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoMarket Pro - Clases Infantiles</title>
    <style>
        /* Fondo con estilo anime / paisaje de fantasÃ­a suave */
        body { 
            font-family: 'Comic Sans MS', cursive, sans-serif; 
            background-color: #e0f7fa; 
            background-image: linear-gradient(180deg, #e0f7fa 0%, #fff9c4 100%);
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px; 
            margin: 0; 
            min-height: 100vh;
        }

        /* Tarjetas con formas muy redondeadas y estilo tierno */
        .card { 
            background: rgba(255, 255, 255, 0.9); 
            border-radius: 40px; 
            padding: 30px; 
            margin-bottom: 40px; 
            width: 100%; 
            max-width: 450px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.05); 
            text-align: center; 
            border: 6px solid #ffffff;
        }

        /* TÃ­tulos en colores pastel */
        h2 { color: #ff8a65; font-size: 1.5rem; margin-bottom: 20px; text-shadow: 1px 1px 0px #fff; }

        /* Videos con bordes suaves */
        video { 
            width: 100%; 
            border-radius: 30px; 
            background: #000; 
            margin-bottom: 20px; 
            border: 4px solid #fce4ec;
        }

        /* BotÃ³n de Mercado Pago estilo burbuja */
        .btn-pago { 
            display: block; 
            background: linear-gradient(45deg, #009ee3, #00c8ff); 
            color: white; 
            padding: 18px; 
            border-radius: 25px; 
            text-decoration: none; 
            font-weight: bold; 
            font-size: 1.1rem; 
            box-shadow: 0 8px 20px rgba(0,158,227,0.3);
            transition: transform 0.2s;
        }
        .btn-pago:active { transform: scale(0.95); }

        /* SecciÃ³n de descarga (Oculta hasta el pago) */
        .seccion-descarga { 
            display: none; 
            margin-top: 25px; 
            padding: 20px; 
            background-color: #f1f8e9; 
            border: 3px dashed #81c784; 
            border-radius: 30px; 
        }

        .btn-pdf { 
            display: block; 
            background-color: #66bb6a; 
            color: white; 
            padding: 15px; 
            border-radius: 20px; 
            text-decoration: none; 
            font-weight: bold; 
            margin-top: 10px; 
            box-shadow: 0 5px 15px rgba(102,187,106,0.3);
        }

        .pago-aprobado { color: #2e7d32; font-weight: bold; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>âœï¸ Clase: Aprendiendo a Escribir</h2>
        <video controls controlsList="nodownload">
            <source src="https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/Videos/escribir2.mp4" type="video/mp4">
        </video>
        <a href="https://mpago.la/1xQZVqo" class="btn-pago">ğŸ›’ Comprar Actividades Escritura</a>
        <div class="seccion-descarga">
            <p class="pago-aprobado">âœ… Â¡Gracias por tu compra!</p>
            <a href="https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/pdfs/escribir2.pdf" class="btn-pdf" target="_blank">ğŸ“„ Descargar PDF Escritura</a>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ”¢ Clase: Cuenta y Colorea</h2>
        <video controls controlsList="nodownload">
            <source src="https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/Videos/cuenta%20y%20colorea3.mp4" type="video/mp4">
        </video>
        <a href="https://mpago.la/1xQZVqo" class="btn-pago">ğŸ›’ Comprar Actividades Contar</a>
        <div class="seccion-descarga">
            <p class="pago-aprobado">âœ… Â¡Gracias por tu compra!</p>
            <a href="https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/pdfs/cuenta%20y%20colorea4.pdf" class="btn-pdf" target="_blank">ğŸ“„ Descargar PDF Contar</a>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ¨ Clase: Colorea y Aprende</h2>
        <video controls controlsList="nodownload">
            <source src="https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/Videos/colorea%20y%20aprende4.mp4" type="video/mp4">
        </video>
        <a href="https://mpago.la/1xQZVqo" class="btn-pago">ğŸ›’ Comprar Actividades Colorear</a>
        <div class="seccion-descarga">
            <p class="pago-aprobado">âœ… Â¡Gracias por tu compra!</p>
            <a href="https://nmdljfwudjkqrzvuuqvq.supabase.co/storage/v1/object/public/pdfs/colorea%20y%20aprende3.pdf" class="btn-pdf" target="_blank">ğŸ“„ Descargar PDF Colorear</a>
        </div>
    </div>

    <script>
        // 1. SEGURIDAD: Detecta si el usuario regresa de Mercado Pago
        const urlParams = new URLSearchParams(window.location.search);
        const pagoStatus = urlParams.get('status');

        if (pagoStatus === 'approved' || urlParams.has('payment_id')) {
            document.querySelectorAll('.seccion-descarga').forEach(seccion => seccion.style.display = 'block');
            document.querySelectorAll('.btn-pago').forEach(boton => boton.style.display = 'none');
        }

        // 2. AUTO-PAUSA: Evita que se mezclen los audios de los videos
        const todosLosVideos = document.querySelectorAll('video');

        todosLosVideos.forEach(videoActual => {
            videoActual.addEventListener('play', () => {
                todosLosVideos.forEach(otroVideo => {
                    if (otroVideo !== videoActual) {
                        otroVideo.pause();
                    }
                });
            });
        });
    </script>
</body>
</html>
